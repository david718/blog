---
title: (0713)javascript 메모리 관리
date: 2019-07-17 10:07:70
category: TIL
---

javascript 에서는  
무언가(객체, 문자열 등)가 생겨날 때 메모리가 할당(allocate)되며  
더 이상 사용하지 않을 때 할당했던 메모리를 다시 회수(release)한다  
  
이때 자동으로 메모리가 회수되는 과정을 garbage collection이라 한다  
하지만 버그 또는 환경의 제약으로 인해  
garbage collection이 불가능한 경우가 발생하므로  
메모리 관리에 대해 기본적인 지식이 필요하다  

##메모리 생명주기
아래 3단계를 거쳐 메모리는 태어나고 죽는다

1. **allocate:** 메모리 할당. 프로그램이 사용할 수 있도록 운영체제가 메모리를 할당.
2. **use:** 메모리 사용. 할당된 메모리를 프로그램이 사용하는 단계. 개발자가 코드상에서 할당된 변수를 사용함으로써 읽기와 쓰기 작업이 이루어짐  
3. **release:** 프로그램에서 필요하지 않은 메모리 전체를 되돌려주어 다시 사용 가능하게 만드는 단계.

###하드웨어 수준에서의 메모리의 정의
컴퓨터 메모리는 많은 수의 flip flop이 나타내는 비트로 구성되어 있다  

####flip flop과 비트의 정의
상태 정보를 저장하기 위해 2가지 상태를 가지는 circuit이다  
컴퓨터에서 flip flop은 circuit의 한 종류인 트랜지스터를 몇개 가지고 있다  
이 몇개의 트랜지스터를 통해 flip flop에 하나의 비트를 저장할 수 있다  
  
비트는 이진수를 뜻하는 ‘Binary Digit’의 약자로,  
컴퓨터에서 CPU가 처리하는 데이터의 최소 단위 크기를 의미한다  
  
개별 flip flop은 고유한 식별자를 통해 위치를 확인할 수 있으므로  
flip flop을 읽거나 쓰는 것이 가능해진다  
  
컴퓨터 메모리는 이러한 개별 filp flop에 쓰여있는  
비트로 구성된 커다란 하나의 배열과 같다  
  
####바이트
비트, 즉 이진수가 인간에게 익숙하지 않기에  
비트를 더 큰 그룹으로 모아 숫자로 표현하기로 약속한 것이 바이트이다  
(8비트는 1바이트이다)

##메모리 관리 과정
먼저 메모리에 저장되는 것들은 아래 2가지이다

- 프로그램에서 사용되는 변수와 기타 데이터
- 운영체제 및 개별 프로그램의 코드

운영체제와 컴파일러가 위에 것들을 메모리에 저장하고 삭제하는 과정  
즉, 메모리 관리 과정은 어떻게 이루어질까?
이는 정적할당 or 동적할당에 따라서 달라진다

###정적할당 메모리 관리 과정

1. 코드를 컴파일한다
2. 컴파일러는 원시 데이터 타입을 검사해서 메모리 필요량을 미리 계산한다
3. 메모리 필요량이 stack space라는 곳에서 프로그램에 할당된다  
(stack space에서는 함수가 호출되면 해당 함수의 메모리가 기존 메모리 위에 stack처럼 쌓인다)
4. 함수가 종료되면 stack처럼 마지막에 할당된 메모리부터 회수된다

###동적할당 메모리 관리 과정

