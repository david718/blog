---
title: 11.Thinking in React
date: 2019-06-04 17:06:82
category: React
---
(React 공식문서의 main concepts 번역 글입니다.)  
  
**함께보면 이해가 쏙쏙**  
https://youtu.be/T6Wj2pbkorA  
  
React는 Javascript로  
규모가 있는 Web app을 만드는 빠른 방법이다.  
  
이번 글에서는 React를 활용해서 제품 검색 app을 구현할 것이다.  
그 과정을 통해 React 활용 방법에 대해 더 구체적으로 학습할 수 있다.

##Mockup design으로 시작하자
JSON API와 모형 디자인을 가지고 있다고 가정하자.  
모형 디자인은 아래 사진과 같은 모양일 것이다.  

![](./images/mock_data.png)

JSON API는 아래와 같은 제품 data를 return할 것이다.

```js
[
  {category: "Sporting Goods", price: "$49.99", stocked: true, name: "Football"},
  {category: "Sporting Goods", price: "$9.99", stocked: true, name: "Baseball"},
  {category: "Sporting Goods", price: "$29.99", stocked: false, name: "Basketball"},
  {category: "Electronics", price: "$99.99", stocked: true, name: "iPod Touch"},
  {category: "Electronics", price: "$399.99", stocked: false, name: "iPhone 5"},
  {category: "Electronics", price: "$199.99", stocked: true, name: "Nexus 7"}
];
```

##STEP1. UI 요소를 component 단위로 쪼개자
첫번째, component로 구성할 부분에 박스를 그리자.  
그리고 박스로 구분한 각 component들에게 이름을 붙이자.  
만약 디자이너와 일한다면 이미 위 작업을 했을 수 있다.  
디자이너와 얘기해서 포토샵의 layer 이름을 물어보자.  
layer 이름을 component 이름으로 사용할 수 있다.  

###component 만들기 기준?  
그러나 어떠한 기준으로 component를 만들어야 할지 모른다면?  
새로운 function 혹은 object를 만드는 기준을 적용하자.  
그 기준 중 하나는 single responsibility principle  
즉, component는 한가지 로직만 수행해야 한다는 것이다.  
(input 1개 output 1개)
만약 component가 복잡해져서 두가지 이상의 로직을 수행한다면  
해당 component는 더 작은 component로 쪼개야 한다.  
  
JSON data model을 토대로 UI를 구성하기 때문에  
component를 만드는 기준은  
UI보다 data model이 더 적합하다.  
하나의 data model을 완벽히 보여줄 수 있도록  
component를 만들자  

![](./images/component_1.png)

우리가 만드는 제품 검색 App은 5개 component로 구성되어 있다.  
5개 component들 각각의 역할을 아래에 설명했다.  
(component가 보여주는 data는 _이탤릭체_ 로 표시했다.)

1. **FilterableProductTable(오렌지색):** 전체를 포함하는 component
2. **SearchBar(파란색):** 모든 input tag의 _value_ 값 받는다
3. **ProductTable(초록색):** _data모음_ 을 input tag _value_ 값을 기준으로 filtering 하고 보여준다
4. **ProductCategoryRow(청록색):** 각 _category_ 의 이름을 보여준다
5. **ProductRow(빨간색):** 각 product의 _data_ 를 보여준다.

3번 `ProductTable` component를 보면  
표의 header(Name, Price 글자)만 포함하는 것이 아니라  
표 전체를 포함하고 있음을 확인할 수 있다.  
ProductTable에서 header의 역할이 보여주는 것 뿐이어서  
(render 로직 1가지만 수행함 single responsibility)
header를 따로 분리하여 component를 만들지 않았다.  
  
하지만 header에 Name, Price 글자 이외에  
정렬을 위한 요소를 추가하는 경우, 즉 기능이 추가되는 경우  
header를 따로 분리하여 component로 만들 수 있다.  

###component의 계층 구조
제품 검색 App에 대한 component 만들기가 끝난 후  
component의 계층 구조를 만들자.
박스로 구분한 component들을 보면서  
부모 자식 관계를 설정한다(자식을 포함한 박스가 부모가 됨)  
위 제품 검색 App의 component 계층 구조는 다음과 같다.  
  
- FilterableProductTable
  - SearchBar
  - ProductTable
    - ProductCategoryRow
    - ProductRow

##STEP2. 상호작용이 없는(static한) React page를 만들자
component 계층 구조가 완성된 후, 비어있는 App을 채울 차례다.  
가장 쉬운 방법은 상호작용이 없는 React page를 만드는 것이다.  
물론 data model을 가져와서 보여주는 UI로 구성된 page이다.  
  
사용자와 상호작용이 없는 React page를 만드는 과정과  
그 React page가 상호작용할 수 있도록 만드는 과정을 분리하자.  
왜냐하면 상호작용이 없는 React page를 만드는 과정은  
생각없이 타자만 치면 되는 노가다인 반면에,  
상호작용이 있는 React page를 만드는 과정은  
타자치기보다는 생각을 정말 많이 해야하기 때문이다.  
  
###component와 App의 구체적인 구현방법과 동작원리
data model을 보여주는 App을 만들기 위해서는  
다른 component를 재사용하고, data를 props로 전달하는  
component를 만들어야 한다.  
props는 부모에서 자식으로만 전달될 수 있다.  
상호작용 없는 React page를 만들 때, state는 필요 없다.  
state는 data가 바뀔 때 필요한 개념이다.  
상호작용이 없는 React page에서는 data가 바뀌지 않으므로  
state가 필요 없다.  
  
App을 만들때, 하위 component(ProductRow)부터 만들거나  
상위 component(FilterableProductTable)부터 만들 수도 있다.  
계층 구조가 간단한 App의 경우  
상위 component부터 만드는 것이 쉽다.  
반대로 크고 복잡한 App의 경우
하위 component부터 만드는 것이 쉽다.  
  
마지막 단계에서는 data model을 보여주는, 재사용 가능한  
component들의 모음을 갖게 될 것이다.  
모든 component들은 render() method만 가질 수 있다.  
현재 App이 상호작용이 없는 App이기 때문이다.  
계층 구조에 꼭대기에 있는 component(FilterableProductTable)는  
data model을 props로 전달 받는다.  
만약 이 data model에 속한 data 값을 바꾼 후,  
다시 ReactDOM.render()를 호출한다면  
UI는 바뀐 data 값을 반영하여 업데이트 될 것이다.  
  
React에서 data는 위에서 아래로만 전달된다.(one-way data flow)  
이러한 특징때문에 React는 모듈화하기 쉽고 속도가 빠르다.  

###Props vs State
React에서는 2가지 data model의 형태(props, state)가 있다.  
props와 state의 차이를 이해하는 것은 중요하다.  
앞의 state편 블로깅을 참고하여 반드시 둘의 차이를 이해하자.  
